<xml xmlns="https://developers.google.com/blockly/xml"><variables><variable id="2tY*^@WlXGqD*o]LW+Ph">readyForNextCommand</variable><variable id=":l^mzvn{#Ez(*=-,E[zl">message</variable><variable id="TD8G3gN}vko~W%kDKBg;">function_name</variable><variable id="JXB^rW%vr=FF*|-O5Wq~">function_id</variable><variable id="fvI;`/aizr[L[4avz?`S">i</variable><variable id="0Y/i2T_WpmX.^6r?!(:N">matrix</variable><variable id="?uo?nz6CC6@Ow|`jl~zV">row</variable><variable id="x:EnJ}{t#EQfE5+LD-/p">col</variable><variable id="#sxvIYR3ok-R$,BtwUo{">response4</variable><variable id="_;_Y]-t=ANXRa#J[8lw*">response23</variable></variables><block type="pxt-on-start" id="1_|s|-2nWl#Vp6GWS6[D" x="20" y="20"><statement name="HANDLER"><block type="typescript_statement" id="F%igv5!3bSMTxBKbX$yr" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let readyForNextCommand = false" numlines="1" declaredvars="readyForNextCommand"></mutation><comment pinned="false" h="80" w="160">basic.showLeds(`
# # # . .
# . # . .
# # # . #
. . # # .
. . # . #
`)</comment><next><block type="typescript_statement" id="@t6+YG`BVf%K`mB7v^Z|" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let message = &quot;&quot;" numlines="1" declaredvars="message"></mutation><next><block type="typescript_statement" id="/mZZ5EUF_9,?C2qAvcF+" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let function_name = &quot;&quot;" numlines="1" declaredvars="function_name"></mutation><next><block type="typescript_statement" id="?HDQq{3WGCP}Qb5hm61)" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let function_id = &quot;&quot;" numlines="1" declaredvars="function_id"></mutation><next><block type="variables_set" id="w0N:m,|V@_AiLsD)EWHd"><field name="VAR" id="#sxvIYR3ok-R$,BtwUo{">response4</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="?{R|QoRzB^vNq5Sv~.IS"><field name="TEXT"></field></block></value><next><block type="variables_set" id="tX=}8W0ZIvW+jesg+;BV"><field name="VAR" id="_;_Y]-t=ANXRa#J[8lw*">response23</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="HOw6x(ga_-@-ATLk_wwF"><field name="TEXT"></field></block></value><next><block type="typescript_statement" id="^C4SEGMtBtqZ:VJ!WZ!:" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let enable = {" line1="    logo: false," line2="    button_ab: false," line3="    gesture: false," line4="    led_matrix: false," line5="}" numlines="6" declaredvars="enable"></mutation><next><block type="typescript_statement" id="VB}yW},^OCUZom-J2gbb" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="let commands = {" line1="    logo: &quot;i0&quot;," line2="    button_ab: &quot;i1&quot;," line3="    gesture: &quot;i2&quot;," line4="}" numlines="5" declaredvars="commands"></mutation><next><block type="serialSetTxBufferSize" id=",!!;_B#%L.NNWL2K/ztC"><value name="size"><shadow type="math_number" id="BA~*]07rDnl*G@$YM!jO"><field name="NUM">32</field></shadow></value><next><block type="serialSetRxBufferSize" id="p8^IQt]rslXX9KnX)KB9"><value name="size"><shadow type="math_number" id="r?DXVGYV!TKHBb4eEv$u"><field name="NUM">96</field></shadow></value><next><block type="typescript_statement" id="OG}T[gm4OWfdao|R|QJt" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="function add_text (text: string | number) {" line1="    OLED.clear()" line2="    OLED.writeStringNewLine(convertToText(text))" line3="    return 1" line4="}" numlines="5"></mutation><next><block type="typescript_statement" id="v6Ecd/^ZHNSmJoXSJw7f" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const soundExpressionsMap: { [key: number]: SoundExpression } = {" line1="    1: soundExpression.giggle," line2="    2: soundExpression.happy," line3="    3: soundExpression.hello," line4="    4: soundExpression.mysterious," line5="    5: soundExpression.sad," line6="    6: soundExpression.slide," line7="    7: soundExpression.soaring," line8="    8: soundExpression.spring," line9="    9: soundExpression.twinkle" line10="}" numlines="11" declaredvars="soundExpressionsMap"></mutation><next><block type="typescript_statement" id="IDEM=9u!@/]QlwY,2/t|" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const functions: { [key: string]: Function } = {" line1="    'a': add_text," line2="    'd': read_BME280," line3="    'e': read_dust," line4="    'f': read_light_intensity," line5="    'g': read_noise," line6="    'h': read_pir," line7="    'i': read_soil_humidity," line8="    'j': read_water_level," line9="    'k': read_sonarbit_distance," line10="    'l': move_servo," line11="    'm': read_digital," line12="    'n': read_analog," line13="    'o': write_digital," line14="    'p': write_analog," line15="    'q': set_analog_period," line16="    'r': play_sound," line17="    's': play_music," line18="" line19="    'i0': enable_logo," line20="    'i1': enable_button_ab," line21="    'i2': enable_gesture," line22="    'i3': read_accelerometer," line23="    'i4': read_compass," line24="    'i5': read_temperature," line25="" line26="    'o0': play_sound," line27="    'o1': play_music," line28="    'o2': write_led_matrix," line29="    'o2a': enable_led_matrix," line30="}" numlines="31" declaredvars="functions"></mutation><next><block type="typescript_statement" id="4=KWK_Wr-hkHLmYY8dX{" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="const pins_map: { [key: string]: number} = {" line1="    'p0': 100," line2="    'p1': 101," line3="    'p2': 102," line4="    'p3': 103," line5="    'p4': 104," line6="    'p5': 105," line7="    'p6': 106," line8="    'p7': 107," line9="    'p8': 108," line10="    'p9': 109," line11="    'p10': 110," line12="    'p11': 111," line13="    'p12': 112," line14="    'p13': 113," line15="    'p14': 114," line16="    'p15': 115," line17="    'p16': 116," line18="    'p19': 119," line19="    'p20': 120 " line20="}" numlines="21" declaredvars="pins_map"></mutation><next><block type="device_led_enable" id="2`{#0kRmybp/L_)?YT~("><value name="on"><shadow type="logic_boolean" id=";W9^WgQ.^]R|M`:[`}gW"><field name="BOOL">FALSE</field></shadow></value><next><block type="pin_set_audio_pin_enabled" id=",vZn,HsX7sNcIB1X5UGd"><value name="enabled"><shadow type="logic_boolean" id="Pg];P]$g,:(dJheQk(]u"><field name="BOOL">FALSE</field></shadow></value><next><block type="serial_setbaudrate" id="r|6-[o5+1oKGQ;X)h#xM"><field name="rate">BaudRate.BaudRate115200</field><next><block type="OLED_init" id="l.IL_zTae]=)8S2pcEj2"><value name="width"><shadow type="math_number" id="ccB7y2aV%vIq`eJJQOLb"><field name="NUM">128</field></shadow></value><value name="height"><shadow type="math_number" id="0IxrH0PE550l/zBa8V#B"><field name="NUM">64</field></shadow></value><next><block type="OLED_clear" id="3Cb~z(JDxQB}Pv5sbX9T"><next><block type="variables_set" id="T`2;kH%K73dbepkUoHeO"><field name="VAR" id="2tY*^@WlXGqD*o]LW+Ph">readyForNextCommand</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="1ec/{;:77#rrnQWhPonV"><field name="BOOL">TRUE</field></block></value></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="device_button_event" id="h*LRW45(35lX+XN:I0L$" x="669" y="20"><field name="NAME">Button.A</field><statement name="HANDLER"><block type="controls_if" id="k=`)}4zJ~Y7[Z]g:4Q)p"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="I#.?2;!tiLi2FGycKO*B" editable="false"><field name="EXPRESSION">enable.button_ab</field></block></value><statement name="DO0"><block type="serial_writestring" id="GgeWiT2~$VQER%/blZ?d"><value name="text"><block type="text_join" id="d9ip+J(TsXAGN~Z$B;U2"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="em}74pC?vh$u%QA4hf7^" editable="false"><field name="EXPRESSION">commands.button_ab</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="Q.VH#95l;Pi.W[mf/={r" editable="false"><field name="EXPRESSION">"::a1\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_button_event" id=")a?LKSwW(n*V66*rBqJP" x="1348" y="20"><field name="NAME">Button.B</field><statement name="HANDLER"><block type="controls_if" id="2c~[`$*=N{gK+;dVQOX`"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="}Iavzn7Zb*Im+brB2nGI" editable="false"><field name="EXPRESSION">enable.button_ab</field></block></value><statement name="DO0"><block type="serial_writestring" id="$`;^kMpX)CKdUdC+p`KM"><value name="text"><block type="text_join" id="8}5J:1Hll9`fnRnR%tVZ"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="ITooQA#}/#?9uXXtk1^+" editable="false"><field name="EXPRESSION">commands.button_ab</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="sT.P7EIEQ|^vl0Dtr!CN" editable="false"><field name="EXPRESSION">"::b1\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="mpKiSJj$I{#=a_Y7QUXI" x="2027" y="20"><field name="NAME">Gesture.EightG</field><statement name="HANDLER"><block type="controls_if" id="-I*CoK$AgESSPm5R+E5,"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="+c@:3)bdh?ZTqYMo))`q" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="2d2/VG{=dCI00CKx%HU["><value name="text"><block type="text_join" id="Wk0IYNgDQts9s$qTO/TF"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="}zX}!^v+4VFavm|[?yt;" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="krMBHn18H~~2d#htv`Yz" editable="false"><field name="EXPRESSION">"::EightG\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="qWh2WPp-.p7-nz(!WX;-" x="2724" y="20"><field name="NAME">Gesture.FreeFall</field><statement name="HANDLER"><block type="controls_if" id="FCJ,MaA3*EZ6y)?F4+0j"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="~NOoo}_Sb@^O[P1=6])E" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="lukuNm/GbEaSD`7}W,q}"><value name="text"><block type="text_join" id="b;UsuNYeLHF*,DqT%OM+"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="Qds@fwl(`fA4/OHbQAFs" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="Pg.I(IVpb?%pUgiJLak7" editable="false"><field name="EXPRESSION">"::FreeFall\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="u7~nIPgzyIR|cK}aBv+:" x="3439" y="20"><field name="NAME">Gesture.LogoUp</field><statement name="HANDLER"><block type="controls_if" id="OV5x.M4eTC+WZL7q|KO/"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="6X!P;2;ibp:by[em%p]F" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="kt(,.Wr]Ymf*`%Z0gH4m"><value name="text"><block type="text_join" id="0^ykqR/eNC@)$ur:bg#R"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="n_7?jaGi,8B{WSt|Tg[M" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="8iq%SCG,{=Pz.?ZKdDop" editable="false"><field name="EXPRESSION">"::LogoUp\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="{vl%7f|NU0.28,b$qq!y" x="4135" y="20"><field name="NAME">Gesture.TiltLeft</field><statement name="HANDLER"><block type="controls_if" id="eqh-nb6:Y%U,`k)L:=J^"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="ZVP[H^i#;Bwb9}DI-KXw" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="SX2VgE+G1lP[v;NnwFM0"><value name="text"><block type="text_join" id="SCQ(Q$a39Yy@;54!c,wp"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="id09^k+R|C,z]kZTF2=Y" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="(88d6_?10g(t;|FCjJe8" editable="false"><field name="EXPRESSION">"::TiltLeft\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="osZ?%2);XF.!r[U)B*Jt" x="4850" y="20"><field name="NAME">Gesture.SixG</field><statement name="HANDLER"><block type="controls_if" id="noN_$w%{Y5J!G|kzX]AH"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="^y#6mg}m5.R-4P6Qa27g" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="Cye3Wx6Al=Xo0-cecyms"><value name="text"><block type="text_join" id="dJ;l^BBjYM@SN~fu80D`"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="=mc4Zv)fnJbOMFSWf+8N" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="B,y0)qnzk?ZiaHZ5Uf.D" editable="false"><field name="EXPRESSION">"::SixG\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="Vk7.J)a?6d~~tO!)ER5^" x="20" y="4025"><field name="NAME">Gesture.TiltRight</field><statement name="HANDLER"><block type="controls_if" id="(IfRkkg]RMpzY1mm6i!K"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="i@iXi6{#QE!,Wmy~,T{%" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="z5I]S7%Ca+KxawLfY_p%"><value name="text"><block type="text_join" id="EU#ty%@I^PctElRXZxMB"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="7of-+h%bYk[dl).n793}" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="=yC~N/Yf(^k[~%zg.cD]" editable="false"><field name="EXPRESSION">"::TiltRight\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="r`evChpkZAhi?;kiQrBt" x="743" y="4025"><field name="NAME">Gesture.LogoDown</field><statement name="HANDLER"><block type="controls_if" id="m#^;Q$9=!!`4lFBo#P)p"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="V8hLjT=N%G;hH9r:Td=d" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="r9MXy73|^EC12=R]ER6!"><value name="text"><block type="text_join" id="5GGEPZMT,4iVa0k+o,h-"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="6fy;Q%J_B8R=fclCP@lc" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="oDO!+CC.NI=BcW3N3|HB" editable="false"><field name="EXPRESSION">"::LogoDown\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="t/2uN4[*}F}5pk`#B5/n" x="1458" y="4025"><field name="NAME">Gesture.ThreeG</field><statement name="HANDLER"><block type="controls_if" id="W9S``E5KI-c/a%F#7uRm"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="IW]72;VTCzycB{Y4(a[O" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="w$Mel1%9BP^)Ow_,DZAz"><value name="text"><block type="text_join" id="}ZfeV9v)n)=q~1E#j~Lo"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="d797D[}iur=~-A_]%a@_" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="L^F_Mt-c$_OV^Fhz4=3?" editable="false"><field name="EXPRESSION">"::ThreeG\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="n?}jVW7nDXDP9^Z[X[#Y" x="2155" y="4025"><field name="NAME">Gesture.ScreenUp</field><statement name="HANDLER"><block type="controls_if" id="!`AR7Kl(Zd,)M8lzuFPd"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="!|e@RdEFzyMG|}X;Wvgv" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="Bn[?=!F^lZ4nETvFVqKm"><value name="text"><block type="text_join" id="+d,9)3(-4/]hA=@/`N6o"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="3ax((KZZ-[9FX}vWXK61" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="0-OXL3aI0kxwBnMXaAFD" editable="false"><field name="EXPRESSION">"::ScreenUp\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="a1gA{SWDz4Z8+%;lQcZX" x="2869" y="4025"><field name="NAME">Gesture.ScreenDown</field><statement name="HANDLER"><block type="controls_if" id="4MLZ8dylA5Vfh6j9FDK$"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="-ztP0#)JgJbRp9%`(,KI" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="o4J$3I[n6XQlK5bPPu0!"><value name="text"><block type="text_join" id="zL:`:k444.KFH+Cw:voD"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="@ZWWI.WsK;tJ!JP$WOM{" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="IzyJ8,T.$8}RmJZ-:I*u" editable="false"><field name="EXPRESSION">"::ScreenDown\n"</field></block></value></block></value></block></statement></block></statement></block><block type="device_gesture_event" id="u~9pau)n?QNS}{h2zB06" x="3601" y="4025"><field name="NAME">Gesture.Shake</field><statement name="HANDLER"><block type="controls_if" id="b_R|WAGOa4(G+}$Fz0}m"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="WYV[:$P2)DSHJZ4P:Py/" editable="false"><field name="EXPRESSION">enable.gesture</field></block></value><statement name="DO0"><block type="serial_writestring" id="=%@,gPD;P:dnEP2:E@IF"><value name="text"><block type="text_join" id="COd;:v5wy0f%~NjoX.q^"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="X|8F_A!Y7ohN98rT0XMG" editable="false"><field name="EXPRESSION">commands.gesture</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="mg#XUANCfHPcmU5o)I?C" editable="false"><field name="EXPRESSION">"::Shake\n"</field></block></value></block></value></block></statement></block></statement></block><block type="input_logo_event" id="YAsL8^BG*gA:HZ:$rD0f" x="4289" y="4025"><field name="action">TouchButtonEvent.Released</field><statement name="HANDLER"><block type="controls_if" id="ZWXba22o9-6-BW[z`*D;"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="J8+%m)I:AwpBNmdCi1]a" editable="false"><field name="EXPRESSION">enable.logo</field></block></value><statement name="DO0"><block type="serial_writestring" id="65(;UwXOv!-$hd6:zxLa"><value name="text"><block type="text_join" id="?;upVUhRQ:D#2tNn2eDQ"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="AlSoKF;#CTG~GM3{_O-I" editable="false"><field name="EXPRESSION">commands.logo</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="mqB!8pG@Zb?^Vf/FRd)e" editable="false"><field name="EXPRESSION">"::0\n"</field></block></value></block></value></block></statement></block></statement></block><block type="input_logo_event" id="c2g$!0TxXJ^xQDeDPX]n" x="4916" y="4025"><field name="action">TouchButtonEvent.Touched</field><statement name="HANDLER"><block type="controls_if" id="))ICA=;%_e3G#PS~).H["><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="Ujp07@^?{eJ!kUO/_,lM" editable="false"><field name="EXPRESSION">enable.logo</field></block></value><statement name="DO0"><block type="serial_writestring" id="Dcgm0]TbV[}BEf,9yQ~P"><value name="text"><block type="text_join" id="C!dIZs3Uf2HBNLHt`ph9"><mutation items="2"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="O.m8YmhZ0cENxkIn[0M0" editable="false"><field name="EXPRESSION">commands.logo</field></block></value><value name="ADD1"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="Q:4XLU.Intd(RV19T+|p" editable="false"><field name="EXPRESSION">"::1\n"</field></block></value></block></value></block></statement></block></statement></block><block type="serial_on_data_received" id="06dk`+H$oGI$rD)D|U~L" x="20" y="4286"><value name="delimiters"><shadow type="serial_delimiter_conv" id="1Z6I!0GI={^wA~MC;srS"><field name="del">Delimiters.NewLine</field></shadow></value><statement name="HANDLER"><block type="controls_if" id="hCJ!$N.!cyX4^}--^]+("><comment pinned="false" h="80" w="160">exit if not ready</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_negate" id="SEQy/5:46BOwvd?cRj+k"><value name="BOOL"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="variables_get" id="/3ONiNOtcb5xahYII?B$"><field name="VAR" id="2tY*^@WlXGqD*o]LW+Ph">readyForNextCommand</field></block></value></block></value><statement name="DO0"><block type="typescript_statement" id="B$2-/!^sB(-B(kEE]x@i" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="return;" numlines="1"></mutation></block></statement><next><block type="variables_set" id="DEV.bc}~c#N,*o*5L4hi"><field name="VAR" id=":l^mzvn{#Ez(*=-,E[zl">message</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="serial_read_until" id="(W#%{:`E(Hh|iKMgrFWl"><value name="delimiter"><shadow type="serial_delimiter_conv" id=";N[UIrZ4aZ3DmSfiIW2S"><field name="del">Delimiters.NewLine</field></shadow></value></block></value><next><block type="variables_set" id="fT/@RJ:OThgEF:FQ.C+R"><field name="VAR" id="TD8G3gN}vko~W%kDKBg;">function_name</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="S22zoVc5`lh_M4dothn~"><field name="TEXT">exception</field></block></value><next><block type="variables_set" id="+.74c|qhP00vcfzQMnJk"><field name="VAR" id="JXB^rW%vr=FF*|-O5Wq~">function_id</field><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="#MgU!Ev{WST~N$Yly%TU"><field name="TEXT">exception</field></block></value><next><block type="variables_set" id="#C`N`8g/o].Lj)g40%R4"><field name="VAR" id="2tY*^@WlXGqD*o]LW+Ph">readyForNextCommand</field><comment pinned="false" h="80" w="160">set to false immediately after starting processing</comment><value name="VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="logic_boolean" id="ly#I.QU]e]io-Hy%LZq;"><field name="BOOL">FALSE</field></block></value><next><block type="typescript_statement" id="BOkeKmhPT=?H[Szg]},o" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="try {" line1="        let parts = message.split(&quot;:&quot;);" line2="        if (parts.length &lt; 2) throw &quot;Invalid data format&quot;;" line3="" line4="        function_name = parts[0];" line5="        function_id = parts[1];" line6="        let args = parts.slice(2);" line7="" line8="        let func = functions[function_name];" line9="        if (!func) throw &quot;Function not found&quot;;" line10="" line11="        let parsed_args: any[] = [];" line12="        for (let arg of args) {" line13="            if (pins_map[arg] !== undefined) {" line14="                parsed_args.push(pins_map[arg]);" line15="            } else {" line16="                let parsedInt = parseInt(arg);" line17="                if (!isNaN(parsedInt)) {" line18="                    parsed_args.push(parsedInt);" line19="                } else {" line20="                    parsed_args.push(arg);" line21="                }" line22="            }" line23="        }" line24="" line25="        let result;" line26="        switch (parsed_args.length) {" line27="            case 0:" line28="                result = func();" line29="                break;" line30="            case 1:" line31="                result = func(parsed_args[0]);" line32="                break;" line33="            case 2:" line34="                result = func(parsed_args[0], parsed_args[1]);" line35="                break;" line36="            case 3:" line37="                result = func(parsed_args[0], parsed_args[1], parsed_args[2]);" line38="                break;" line39="            default:" line40="                result = -1; // handle case when number of arguments exceed expectations" line41="                break;" line42="        }" line43="" line44="        let response3 = function_name + &quot;:&quot; + function_id + &quot;:&quot; + result + &quot;\n&quot;;" line45="        serial.writeString(response3);" line46="    } catch (e) {" line47="        let response22 = function_name + &quot;:&quot; + function_id + &quot;:-1\n&quot;;" line48="        serial.writeString(response22);" line49="    } finally {" line50="        readyForNextCommand = true; // set to true once processing is done" line51="        basic.pause(50); // 50ms delay to provide buffer" line52="    }" numlines="53"></mutation></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="m~5}OxvhZI(:C?~P3r-U" x="871" y="4286"><mutation name="enable_led_matrix" functionid="?m-:5!:@0$Fz{^tCp9{8"><arg name="state" id="uol527l5q7hz16u8qdw4p" type="number"></arg></mutation><field name="function_name">enable_led_matrix</field><value name="uol527l5q7hz16u8qdw4p"><shadow type="argument_reporter_number" id="RH@s;kr_iL$[l!0CVXA("><field name="VALUE">state</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="1`i+8{jM]LqQ-gojd6Er" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enable.led_matrix = state === 1;" numlines="1"></mutation><next><block type="controls_if" id="Yt#%0X[ez9;817U|eNEC"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="UI;Ye4@uH=92R,V%#H{W"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="$^R{g5@1`4*41^L~$Glv"><field name="VALUE">state</field></block></value><value name="B"><shadow type="math_number" id="[XWplg@iA3:WR1Q%Rd8K"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="device_led_enable" id="5QV)=0ju.$zOHQ{T:2H#"><value name="on"><shadow type="logic_boolean" id="p~(NsvGM=eBc3x,fV%{-"><field name="BOOL">TRUE</field></shadow></value></block></statement><statement name="ELSE"><block type="device_led_enable" id="g#2GpWnv@Paef{H)ruEX"><value name="on"><shadow type="logic_boolean" id="/N*M[?mi_@c=Hq;D;9im"><field name="BOOL">FALSE</field></shadow></value></block></statement><next><block type="function_return" id="raZWubYI(IA}Dzsttiw4"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="v_I({-zxYN~Abp[AG,UF" editable="false"><field name="EXPRESSION">state === 1 ? "ready" : state === 0 ? "off" : state</field></block></value></block></next></block></next></block></statement></block><block type="function_definition" id="9.X:kRqH]J_pVXZX,{`I" x="1512" y="4286"><mutation name="move_servo" functionid="W:;c}7dbR_[QL,6G.aEI"><arg name="pin" id="jbsgz929pi91xxemvwdfdx" type="number"></arg><arg name="angle" id="yrtayue5jkja9qg1co24k" type="number"></arg></mutation><field name="function_name">move_servo</field><value name="jbsgz929pi91xxemvwdfdx"><shadow type="argument_reporter_number" id="u)JQ:;+ngiV.,m9BIqDY"><field name="VALUE">pin</field></shadow></value><value name="yrtayue5jkja9qg1co24k"><shadow type="argument_reporter_number" id="2US%sv-xKW=fkZ+tK;n0"><field name="VALUE">angle</field></shadow></value><statement name="STACK"><block type="typescript_statement" id=")~;o5Y2;XwmF|Y|OIah." editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.servoWritePin(pin, angle)" numlines="1"></mutation><next><block type="function_return" id="-/Z8R%iU9z0!`:6@Em5)"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="~sad_(Z*vy+xPIZtXwaG"><field name="NUM">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="iT56Z:]3!(Aqr`l_3m4%" x="1921" y="4286"><mutation name="play_sound" functionid="EcbD{U1fx/%#^i@jbl^I"><arg name="sound_id" id="sb53vncnfh74swen8yit" type="number"></arg></mutation><field name="function_name">play_sound</field><value name="sb53vncnfh74swen8yit"><shadow type="argument_reporter_number" id="!8Tu,q2MqCf/WU92JBbr"><field name="VALUE">sound_id</field></shadow></value><statement name="STACK"><block type="music_playable_play" id="!96StvT1._UQ#jgLe$C1"><field name="playbackMode">music.PlaybackMode.InBackground</field><value name="toPlay"><shadow type="music_string_playable"></shadow><block type="typescript_expression" id="rh38rE2Gf:arwR-;x2s~" editable="false"><field name="EXPRESSION">music.builtinPlayableSoundEffect(soundExpressionsMap[sound_id])</field></block></value><next><block type="function_return" id="h3}N]:kSCGQ~Ee(:E#B}"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="^o]B]Fa0DJyTQL0XMwqC"><field name="NUM">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="-}a1lGdbJTE$}{-r/m7v" x="2776" y="4286"><mutation name="set_analog_period" functionid="Ba,*CDl4oeGuHdd)?2fc"><arg name="pin" id="kibyjt3soii13icwuox1f" type="number"></arg><arg name="period" id="gcriq4seks1tli1e35va" type="number"></arg></mutation><field name="function_name">set_analog_period</field><value name="kibyjt3soii13icwuox1f"><shadow type="argument_reporter_number" id="Dd@)PG+}Ge!aAn92[|Q0"><field name="VALUE">pin</field></shadow></value><value name="gcriq4seks1tli1e35va"><shadow type="argument_reporter_number" id="t1=C?+Az[7~,-HocWs=P"><field name="VALUE">period</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="A1!#L7NGL+xT)]ud^vY5" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.analogSetPeriod(pin, period)" numlines="1"></mutation><next><block type="function_return" id=",WC2,^f:6SlX)GSeBB.)"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="/[_=vR]5s~,6;kF{s{kp"><field name="NUM">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="V,IIH*W%eB3{O4F@2OYq" x="3256" y="4286"><mutation name="play_music" functionid="Vq?Pd=F4+0?^d:S8o~qA"><arg name="music_id" id="ftxpoj5cji1rl3ptwiul" type="number"></arg></mutation><field name="function_name">play_music</field><value name="ftxpoj5cji1rl3ptwiul"><shadow type="argument_reporter_number" id="=QI-2lu#fgu0.~8DDFz^"><field name="VALUE">music_id</field></shadow></value><statement name="STACK"><block type="music_playable_play_default_bkg" id="ux[g#t4.:edqw=RxrS5E"><field name="playbackMode">music.PlaybackMode.InBackground</field><value name="toPlay"><shadow type="music_string_playable"></shadow><block type="typescript_expression" id="t@4I(dqnK%?QQ.l#5hnQ" editable="false"><field name="EXPRESSION">music.builtInPlayableMelody(music_id)</field></block></value><next><block type="function_return" id="Et5~Y/8E(LBYB38gkA$X"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="g-_`2_,jGaRg7HoFpg/A"><field name="NUM">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="9[Q8tmx}pJ%/La[lye=P" x="3882" y="4286"><mutation name="read_accelerometer" functionid="_g8S^lN$NQmh:u;/:gE,"></mutation><field name="function_name">read_accelerometer</field><statement name="STACK"><block type="function_return" id="hH~hD14tQ~eRS/f9_?nu"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text_join" id="zqUfDdJm.kC7Ub+0:|Ft" inline="false"><mutation items="5"></mutation><value name="ADD0"><shadow type="text"><field name="TEXT"></field></shadow><block type="device_acceleration" id="erV2KRS0)taqp|P9xnA?"><field name="NAME">Dimension.X</field></block></value><value name="ADD1"><shadow type="text" id="u3g`utz5Yrvg=wY9q-G,"><field name="TEXT">,</field></shadow></value><value name="ADD2"><shadow type="text"><field name="TEXT"></field></shadow><block type="device_acceleration" id="cq@{Lwc{PCJcD6sdwIjM"><field name="NAME">Dimension.Y</field></block></value><value name="ADD3"><shadow type="text" id="zQ}Fzt25=PXT0A5R*2dw"><field name="TEXT">,</field></shadow></value><value name="ADD4"><shadow type="text"><field name="TEXT"></field></shadow><block type="device_acceleration" id="EH9-)p98=I=}i8k[r2s0"><field name="NAME">Dimension.Z</field></block></value></block></value></block></statement></block><block type="function_definition" id="$*0+#,@p;Q(hr=1CoM%H" x="4286" y="4286"><mutation name="read_compass" functionid="KQ8RYp]ta*y=[p?St[up"></mutation><field name="function_name">read_compass</field><statement name="STACK"><block type="function_return" id="bzNN]~Rgv#F)x+Vuf9@8"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_heading" id="A0(3,@WW+dB(kiE}5:g["></block></value></block></statement></block><block type="function_definition" id="[_1-?jY3C`%-d;#{!!5#" x="4647" y="4286"><mutation name="read_temperature" functionid="H800],V:TXd2+a=@inNP"></mutation><field name="function_name">read_temperature</field><statement name="STACK"><block type="function_return" id="m7eW$YbpV0()Z7}Xm]DS"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="device_temperature" id="vtk$hFxl9Nr#(|Ix5=c5"></block></value></block></statement></block><block type="function_definition" id="]:e~jj%B|5eX(@f2!:AM" x="4982" y="4286"><mutation name="read_water_level" functionid="B_p+_UeA1Ke*}~9So-_="><arg name="water_level_pin" id="zawwyojo7qvtoyfszf6i" type="number"></arg></mutation><field name="function_name">read_water_level</field><value name="zawwyojo7qvtoyfszf6i"><shadow type="argument_reporter_number" id="zryg/d?`[t{`W4i1vQuD"><field name="VALUE">water_level_pin</field></shadow></value><statement name="STACK"><block type="function_return" id="j]n8J/5kSFoTTr=_.lWH"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="*@H};D$j7?6#U~po~kiX" editable="false"><field name="EXPRESSION">Environment.ReadWaterLevel(water_level_pin)</field></block></value></block></statement></block><block type="function_definition" id="qh:FHd3y6w=Hcgj!W)=}" x="20" y="6867"><mutation name="read_analog" functionid="0G!ZU8%32BI+48qgVtrX"><arg name="pin" id="nr0jy2lm0gaj3sgo49pk" type="number"></arg></mutation><field name="function_name">read_analog</field><value name="nr0jy2lm0gaj3sgo49pk"><shadow type="argument_reporter_number" id="R5~OITONXInT]t[Mfj0n"><field name="VALUE">pin</field></shadow></value><statement name="STACK"><block type="function_return" id="zAD.y|O,#.k+.F46iO*D"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="2D_M16P{W1XeM{JKV4A)" editable="false"><field name="EXPRESSION">pins.analogReadPin(pin)</field></block></value></block></statement></block><block type="function_definition" id=";*Kb%g-Dt|X1Cl6FL}(8" x="414" y="6867"><mutation name="write_analog" functionid="vSNe#u}T%m8.$GaAQuhD"><arg name="pin" id="s9p0k5o19w3lqqasa3e3t" type="number"></arg><arg name="value" id="z6k311bwbcakb0u1b6od3" type="number"></arg></mutation><field name="function_name">write_analog</field><value name="s9p0k5o19w3lqqasa3e3t"><shadow type="argument_reporter_number" id="6wd-FsDl@JNbn8Pik+gr"><field name="VALUE">pin</field></shadow></value><value name="z6k311bwbcakb0u1b6od3"><shadow type="argument_reporter_number" id="!RI$l`;+gk8y?%@@kTqk"><field name="VALUE">value</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="jD*OnL|k=E[X]{z8)Y=I" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.analogWritePin(pin, value)" numlines="1"></mutation><next><block type="function_return" id="Vjkq;;*oa|]ylb):$OGX"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="]sYjtH_[oeiw_6y!u1fy"><field name="NUM">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="sWrh},V6TuOYwQy@I96W" x="841" y="6867"><mutation name="read_light_intensity" functionid="OO|dA1o%n0JUQ(1{kV(_"><arg name="light_intensity_pin" id="76tam0mnx1p7jchg1c6zh" type="number"></arg></mutation><field name="function_name">read_light_intensity</field><value name="76tam0mnx1p7jchg1c6zh"><shadow type="argument_reporter_number" id="WZL7^HpauNY%5~X}9HO]"><field name="VALUE">light_intensity_pin</field></shadow></value><statement name="STACK"><block type="function_return" id="RqkenMI7+ee,*8H@ALl_"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id=",M_2X#PY$TXMSF%7Ain=" editable="false"><field name="EXPRESSION">Environment.ReadLightIntensity(light_intensity_pin)</field></block></value></block></statement></block><block type="function_definition" id="@TLCDs_$`iR%RR.;6!zW" x="1482" y="6867"><mutation name="read_digital" functionid="CB18|*2%S/m]d:)7OnV;"><arg name="pin" id="q9ianj5t01vhj6ybqpix8" type="number"></arg></mutation><field name="function_name">read_digital</field><value name="q9ianj5t01vhj6ybqpix8"><shadow type="argument_reporter_number" id="W*{UFsB@_|V}BmUZI)$7"><field name="VALUE">pin</field></shadow></value><statement name="STACK"><block type="function_return" id="JA|z6+K;D:WW;DfXtYVP"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="%.Cl}hXVI%IU_x^uAUjq" editable="false"><field name="EXPRESSION">pins.digitalReadPin(pin)</field></block></value></block></statement></block><block type="function_definition" id="c5B[|@IyeuiQl%gEGHpO" x="1885" y="6867"><mutation name="read_sonarbit_distance" functionid="44m+%!T((IP[EJq8d@oK"><arg name="pin" id="3thp2gxnrsmsx6d0y6p1hk" type="number"></arg><arg name="distance_unit" id="nzufd77n3rke4vrv387y" type="number"></arg></mutation><field name="function_name">read_sonarbit_distance</field><value name="3thp2gxnrsmsx6d0y6p1hk"><shadow type="argument_reporter_number" id="DfD17-f~HKtYLf}$X@%S"><field name="VALUE">pin</field></shadow></value><value name="nzufd77n3rke4vrv387y"><shadow type="argument_reporter_number" id="s(t6#HN=+c^FO89jN_@l"><field name="VALUE">distance_unit</field></shadow></value><statement name="STACK"><block type="function_return" id="Z7`;fQ:9DuU0e=8jbKfM"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="math_arithmetic" id="k@63]-!D*Fj@(vw?OKFL"><field name="OP">DIVIDE</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="f][?hh+Z^g/cfW(yf}Se" editable="false"><field name="EXPRESSION">Environment.sonarbit_distance(distance_unit, pin)</field></block></value><value name="B"><shadow type="math_number" id="VHDd%yUqipB+`QCddA2X"><field name="NUM">2</field></shadow></value></block></value></block></statement></block><block type="function_definition" id="mp{CpYpXlIcu~B~6xFPD" x="2616" y="6867"><mutation name="read_soil_humidity" functionid="S_{;_:q2J%1l@~38x/tw"><arg name="soil_moisture_pin" id="ziwzclhohkd4wikf6sh3t" type="number"></arg></mutation><field name="function_name">read_soil_humidity</field><value name="ziwzclhohkd4wikf6sh3t"><shadow type="argument_reporter_number" id="1}Uz+{,~vgt(!=4GS2D("><field name="VALUE">soil_moisture_pin</field></shadow></value><statement name="STACK"><block type="function_return" id="l!Ek0lG;ItR_9)+T4Foz"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="dQ]yjBwdQBg_^(z1SN1X" editable="false"><field name="EXPRESSION">Environment.ReadSoilHumidity(soil_moisture_pin)</field></block></value></block></statement></block><block type="function_definition" id="2i@=gbh@C5i~/7evfono" x="3222" y="6867"><mutation name="read_noise" functionid="8~+bZ,hb+HOgtq{Vm3jZ"><arg name="noise_pin" id="6cqt8pnji179b80c0etm" type="number"></arg></mutation><field name="function_name">read_noise</field><value name="6cqt8pnji179b80c0etm"><shadow type="argument_reporter_number" id="Y*4YN@y`CdF67vLk~X=;"><field name="VALUE">noise_pin</field></shadow></value><statement name="STACK"><block type="function_return" id="p4(N~FF%6/HYi%%Wd7wK"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="EE5,OIL~WnjxqsC2!{ck" editable="false"><field name="EXPRESSION">Environment.ReadNoise(noise_pin)</field></block></value></block></statement></block><block type="function_definition" id=";v77B=7b2S8wf(X@|LEg" x="3695" y="6867"><mutation name="read_dust" functionid="{zM^4f+#DqJM~1T)(?0$"><arg name="v_led" id="8p8t8kuco7c61j7p5x8n" type="number"></arg><arg name="vo" id="k0pld4jlncyiguvo57i7" type="number"></arg></mutation><field name="function_name">read_dust</field><value name="8p8t8kuco7c61j7p5x8n"><shadow type="argument_reporter_number" id="b96.*;Gz@3!B;UGK7F5h"><field name="VALUE">v_led</field></shadow></value><value name="k0pld4jlncyiguvo57i7"><shadow type="argument_reporter_number" id="s^w_,_GiVqy3mhNOPqo0"><field name="VALUE">vo</field></shadow></value><statement name="STACK"><block type="function_return" id="6QIhO+)Cv[vcAx4T$Uuc"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="7pA+n|a0vi85@hZ2WvKS" editable="false"><field name="EXPRESSION">Environment.ReadDust(v_led, vo)</field></block></value></block></statement></block><block type="function_definition" id=":.!^a(@C4U?$y=9[^HH)" x="4159" y="6867"><mutation name="read_pir" functionid="_uD3W4CMb(`(GqzCS3(O"><arg name="pin" id="adsx7ktw4nh3vxhc2gbp" type="number"></arg></mutation><field name="function_name">read_pir</field><value name="adsx7ktw4nh3vxhc2gbp"><shadow type="argument_reporter_number" id="`vZ)Yqax#tT%Vm?:l?T9"><field name="VALUE">pin</field></shadow></value><statement name="STACK"><block type="controls_if" id="2-0y3[5!]K*bv@P/$^T9"><mutation else="1"></mutation><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="typescript_expression" id="`/hqTwjWAS0B0a{$I?t`" editable="false"><field name="EXPRESSION">Environment.PIR(pin)</field></block></value><statement name="DO0"><block type="function_return" id="xF?i_r/!%?MOto5r0Lat"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="xM/Bq3Oi=C4v1_E(A]vw"><field name="NUM">1</field></shadow></value></block></statement><statement name="ELSE"><block type="function_return" id=";j#u|CnS{NtrwTohZ9J2"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="HrZf3g;MbHT]9Y*i30wj"><field name="NUM">0</field></shadow></value></block></statement></block></statement></block><block type="function_definition" id="-fJ}zNBft3=#V5)Lrhtf" x="4518" y="6867"><mutation name="enable_logo" functionid="`.2H7oSjy59.Mx_=@KA6"><arg name="state" id="zgctwj84eu6dc0wsluyr" type="number"></arg></mutation><field name="function_name">enable_logo</field><value name="zgctwj84eu6dc0wsluyr"><shadow type="argument_reporter_number" id="NsXdhlR6E1aArR0v/XDD"><field name="VALUE">state</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="._DbKmd}.bsozFZ|M0_4" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enable.logo = state === 1;" numlines="1"></mutation><next><block type="function_return" id="94]M1Kuv4_kf(!!Yg%Sp"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="98(5GA(M1/i:x6?A,!y," editable="false"><field name="EXPRESSION">state === 1 ? "ready" : state === 0 ? "off" : state</field></block></value></block></next></block></statement></block><block type="function_definition" id="y~-iz1_nSEfMI-4,]/7W" x="5158" y="6867"><mutation name="enable_button_ab" functionid="ii||SYgs[?p@(4(rwg_2"><arg name="state" id="ouzkfdcyxai1gtipsjixy" type="number"></arg></mutation><field name="function_name">enable_button_ab</field><value name="ouzkfdcyxai1gtipsjixy"><shadow type="argument_reporter_number" id="$DBE2i}+w(C5)EB4W08("><field name="VALUE">state</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="E-awl/Y,yx`F9{d-l0!-" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enable.button_ab = state === 1;" numlines="1"></mutation><next><block type="function_return" id="sVUsC-]?%ERHO!aQn`m["><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="Zx:9B](qSL[gh)^1dOM_" editable="false"><field name="EXPRESSION">state === 1 ? "ready" : state === 0 ? "off" : state</field></block></value></block></next></block></statement></block><block type="function_definition" id="q%$rc%D;A[$n~o~p#3jP" x="20" y="7222"><mutation name="enable_gesture" functionid="N2X+ECB.86FU|qjUHfFa"><arg name="state" id="nto11l94n2idw4c8b10c4" type="number"></arg></mutation><field name="function_name">enable_gesture</field><value name="nto11l94n2idw4c8b10c4"><shadow type="argument_reporter_number" id="p1m/:yU7C(krbl,/5$I_"><field name="VALUE">state</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="xr+7{)DCo6lp%8n}}6Vy" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="enable.gesture = state === 1;" numlines="1"></mutation><next><block type="function_return" id="7(F~0QPy?ga-io@:Db!$"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="typescript_expression" id="W6?S[[HTCy.}d,R]~dhg" editable="false"><field name="EXPRESSION">state === 1 ? "ready" : state === 0 ? "off" : state</field></block></value></block></next></block></statement></block><block type="function_definition" id="@*.5vFB$%fmpZxU.RUO*" x="660" y="7222"><mutation name="write_led_matrix" functionid="M7Q]z629wTw~~yx:gT8z"><arg name="pattern" id="ep3inialb2nxniai635o" type="string"></arg></mutation><field name="function_name">write_led_matrix</field><comment pinned="false" h="80" w="160">Convert the pattern to a 5x5 matrix</comment><value name="ep3inialb2nxniai635o"><shadow type="argument_reporter_string" id="oQ~?`n$ljAx[%B?5C$0."><field name="VALUE">pattern</field></shadow></value><statement name="STACK"><block type="device_plot" id="#j^0rd!xS4*Y%9!LS!N2"><comment pinned="false" h="80" w="160">basic.showLeds(`
# . . . .
. . . . .
. . . # .
. . . . .
. # # # #
`)</comment><value name="x"><shadow type="math_number_minmax" id="Vpn?D]9hDuMk_4rHHBW,"><mutation min="0" max="4" label="Number" precision="0"></mutation><field name="SLIDER">2</field></shadow></value><value name="y"><shadow type="math_number_minmax" id="99`^dBA+EXZ-iDAS!=#3"><mutation min="0" max="4" label="Number" precision="0"></mutation><field name="SLIDER">3</field></shadow></value><next><block type="device_plot" id="2GCRsBK}{3MB+)Oag1A("><value name="x"><shadow type="math_number_minmax" id="blFcX7MSY:x^jH_;gav["><mutation min="0" max="4" label="Number" precision="0"></mutation><field name="SLIDER">3</field></shadow></value><value name="y"><shadow type="math_number_minmax" id="|z%3Z1,~6/eIN^SFQU`~"><mutation min="0" max="4" label="Number" precision="0"></mutation><field name="SLIDER">2</field></shadow></value><next><block type="controls_if" id="wlXtUxX8z^SleY8Vs%@x"><comment pinned="false" h="80" w="160">if (led.point(2, 3)) {
return 5
} else {
return 7
}
Ensure the pattern has exactly 25 characters</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="-C0h9+ZI#W90P6CGu]QO"><field name="OP">NEQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text_length" id="CkhszBS6n,8.*X3,iG$g"><value name="VALUE"><block type="argument_reporter_string" id="FilxG@S+3faL*jwrBA2+"><field name="VALUE">pattern</field></block></value></block></value><value name="B"><shadow type="math_number" id="Ba98r.0!md}T.+|JDRQ$"><field name="NUM">25</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="n}cC=qyb/M76J:_xGa%2"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="|@B@V,e#3H9)}U,28N1/"><field name="TEXT">patternError</field></block></value></block></statement><next><block type="pxt_controls_for" id="v@%RK?[wUro-@s(M;lu6"><value name="VAR"><shadow type="variables_get_reporter" id="e%(]qn#|-PX!D20gi^K6"><field name="VAR" id="fvI;`/aizr[L[4avz?`S">i</field></shadow></value><value name="TO"><shadow type="math_whole_number" id="`+3Nxaj)=zBoA3ahTrB|"><field name="NUM">4</field></shadow></value><statement name="DO"><block type="array_push" id="%82|aD!$xJ6}X!Ln=bv5"><value name="list"><block type="variables_get" id="(WM2SFBH#;BO1KC:Wi~W"><field name="VAR" id="0Y/i2T_WpmX.^6r?!(:N">matrix</field></block></value><value name="value"><block type="string_split" id="$BXX!bDOWH]ah%fjjx0`"><value name="this"><shadow type="text"><field name="TEXT"></field></shadow><block type="typescript_expression" id="Gr;2?A9@pby.gT4:HuI_" editable="false"><field name="EXPRESSION">pattern.slice(i * 5, (i + 1) * 5)</field></block></value><value name="separator"><shadow type="text" id=":eY!j3Q7K$k*Cpw1DdwF"><field name="TEXT"></field></shadow></value></block></value></block></statement><next><block type="pxt_controls_for" id="(t)Qw5{JE+s%EAMybFxD"><comment pinned="false" h="80" w="160">Display the pattern on the LED matrix
let feedback = ''</comment><value name="VAR"><shadow type="variables_get_reporter" id=";5M?sqi%x3-:{bH+/mda"><field name="VAR" id="?uo?nz6CC6@Ow|`jl~zV">row</field></shadow></value><value name="TO"><shadow type="math_whole_number" id="UrUu$XwMP.%`ws;cWCEj"><field name="NUM">4</field></shadow></value><statement name="DO"><block type="pxt_controls_for" id="LS2cNB{5U%N2g?O_homH"><value name="VAR"><shadow type="variables_get_reporter" id="]%d0Q/Y7,i2|xz13hmR5"><field name="VAR" id="x:EnJ}{t#EQfE5+LD-/p">col</field></shadow></value><value name="TO"><shadow type="math_whole_number" id="dE7!!pv14:%4tK3v2M^{"><field name="NUM">4</field></shadow></value><statement name="DO"><block type="controls_if" id="/|1mV:1aX;Y]SoAdjmLp"><mutation else="1"></mutation><comment pinned="false" h="80" w="160">feedback += `(row, ${row}, col, ${col})`</comment><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="^d3IP=a0hLJrlH2g,%%I"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="lists_index_get" id="49=wp!#-teFvy7dV%#;#"><value name="LIST"><block type="lists_index_get" id="7acFHA{U=!I]M9dS80iF"><value name="LIST"><block type="variables_get" id="!24wA`Wf?fy,^,%^b-aB"><field name="VAR" id="0Y/i2T_WpmX.^6r?!(:N">matrix</field></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="!.Hp)?EB$J`=3$@x.U4U"><field name="VAR" id="?uo?nz6CC6@Ow|`jl~zV">row</field></block></value></block></value><value name="INDEX"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="variables_get" id="+A[R6;m1/]_jad^fAS/F"><field name="VAR" id="x:EnJ}{t#EQfE5+LD-/p">col</field></block></value></block></value><value name="B"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="text" id="9_rsrVIzVxzW/R:i8c}5"><field name="TEXT">#</field></block></value></block></value><statement name="DO0"><block type="device_plot" id="!U$B37T$xE+1V7jKox8;"><value name="x"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="n=JxEi*GK!,SiX^?9mIp"><field name="VAR" id="?uo?nz6CC6@Ow|`jl~zV">row</field></block></value><value name="y"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="2|a{q5s0E:hd0k-FRYd?"><field name="VAR" id="x:EnJ}{t#EQfE5+LD-/p">col</field></block></value></block></statement><statement name="ELSE"><block type="device_unplot" id="AyWDTSrL_;j;}~f{r9l_"><value name="x"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="c!x^}KeL.:B=lKW4*@PG"><field name="VAR" id="?uo?nz6CC6@Ow|`jl~zV">row</field></block></value><value name="y"><shadow type="math_number_minmax"><mutation min="0" max="4"></mutation><field name="SLIDER">0</field></shadow><block type="variables_get" id="Re(W+`L#Hz@[q+]-EM8d"><field name="VAR" id="x:EnJ}{t#EQfE5+LD-/p">col</field></block></value></block></statement></block></statement></block></statement><next><block type="function_return" id="Bl(f!WRhkp{;fx3l=CMv"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="|O:NaD=TI,?,s5:_%IeR"><field name="NUM">1</field></shadow></value></block></next></block></next></block></next></block></next></block></next></block></statement></block><block type="function_definition" id="0Z.#?HX#tUrdW4H9MP78" x="1576" y="7222"><mutation name="write_digital" functionid="n7CPVuxIEHXn`/bBF+m;"><arg name="pin" id="ezvq8d5k2jkg3ad78thx2" type="number"></arg><arg name="value" id="qxc3u4xee4hm6p42puirw" type="number"></arg></mutation><field name="function_name">write_digital</field><value name="ezvq8d5k2jkg3ad78thx2"><shadow type="argument_reporter_number" id="N*db=[Mr@{SETAYS/RK$"><field name="VALUE">pin</field></shadow></value><value name="qxc3u4xee4hm6p42puirw"><shadow type="argument_reporter_number" id="QX!rxEwzkqIqB$A_`@;z"><field name="VALUE">value</field></shadow></value><statement name="STACK"><block type="typescript_statement" id="{c]jVtGhq!?O7I@[bU?p" editable="false"><mutation xmlns="http://www.w3.org/1999/xhtml" line0="pins.digitalWritePin(pin, value)" numlines="1"></mutation><next><block type="function_return" id="HR;EkjdlKUoCajkA6(oo"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="2~sH51es]mj0H-/p4ji?"><field name="NUM">1</field></shadow></value></block></next></block></statement></block><block type="function_definition" id="3`]QkQN@3B@(Q5er,.-~" x="2012" y="7222"><mutation name="read_BME280" functionid="{dZ.4X;/R|K)k{lh3[;L"><arg name="state" id="s9axtjvtevhmq652l93ma" type="number"></arg></mutation><field name="function_name">read_BME280</field><value name="s9axtjvtevhmq652l93ma"><shadow type="argument_reporter_number" id="^n{[A*wh7~@C)2^4Q1I3"><field name="VALUE">state</field></shadow></value><statement name="STACK"><block type="controls_if" id="(MNxu)C|i`kCm{9kL_#Z"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="J0~KdcrP6C[ms?u,{Wx;"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="Y)|zKg7xHM**A+nOWka;"><field name="VALUE">state</field></block></value><value name="B"><shadow type="math_number" id=";Y~dt@;6_}9XZgp^K(7s"><field name="NUM">0</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="|2m7A*-vWj|o-*{Pl?;R"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="Environment_octopus_BME280" id="$KHak-9,-xnleSOIO3QQ"><field name="state">Environment.BME280_state.BME280_temperature_C</field></block></value></block></statement><next><block type="controls_if" id="50UBdl-1)xGF1H[ysc8g"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="Ev(i$/SLP~K3{KpmHC5B"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="5sva!(?VbS?6Q+0FlD%~"><field name="VALUE">state</field></block></value><value name="B"><shadow type="math_number" id="wSSQx+KqT+#q.[mtFI5x"><field name="NUM">1</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="rw)2c0p7`6PuH*b_]F20"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="Environment_octopus_BME280" id="ek`|9[1kJ4..Yni9Pf{`"><field name="state">Environment.BME280_state.BME280_humidity</field></block></value></block></statement><next><block type="controls_if" id="ii-m6F.VXV0ME~}wK]F^"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="W;V$IAVzFtv9E9n[N`L%"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="l9m|D82tTqGRf9KTK^!/"><field name="VALUE">state</field></block></value><value name="B"><shadow type="math_number" id="Lfr71r~eltheQc9s%aeT"><field name="NUM">2</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="0F8Q`hu${S%HL}w,RhHK"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="Environment_octopus_BME280" id="uD25Qu|$9~|A==ksSEa2"><field name="state">Environment.BME280_state.BME280_pressure</field></block></value></block></statement><next><block type="controls_if" id="~b]Y^:IrFWOW^SMKVU~n"><value name="IF0"><shadow type="logic_boolean"><field name="BOOL">TRUE</field></shadow><block type="logic_compare" id="xzbpL;S7[zpxWF(~=!5?"><field name="OP">EQ</field><value name="A"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="argument_reporter_number" id="@*ES:@6)AJol^%jVYrgJ"><field name="VALUE">state</field></block></value><value name="B"><shadow type="math_number" id="?4rCJi0Ys51Rkm;C?/#q"><field name="NUM">3</field></shadow></value></block></value><statement name="DO0"><block type="function_return" id="4O@zG[5R1VzJGSO)G$5@"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number"><field name="NUM">0</field></shadow><block type="Environment_octopus_BME280" id="mO^Y[3fkp{#N=E%Wl;w="><field name="state">Environment.BME280_state.BME280_altitude</field></block></value></block></statement><next><block type="function_return" id="[B;_hlUgd@G!|NNZ.`Ti"><mutation xmlns="http://www.w3.org/1999/xhtml" no_return_value="false"></mutation><value name="RETURN_VALUE"><shadow type="math_number" id="y#k-p22W3X.-U)]IoZ!]"><field name="NUM">0</field></shadow></value></block></next></block></next></block></next></block></next></block></statement></block></xml>